<%- include('partials/head', { pageTitle: 'Residence' }) %>
<style>
  .content::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url("/images/bg.png") no-repeat center center;
    background-size: cover;
    z-index: -1;
  }
</style>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="/scripts/residence.js" defer></script>
<link rel="stylesheet" href="/css/application.css">
</head>
<body>
  <div class="content">
    <div class="overlay">
      <div class="overlay-text">
        <h1><%= singleResidence.title %></h1>
      </div>
    </div>
    <div class="text-box">
      <p style="color: white;"><%= singleResidence.description %></p>
    </div>
  </div>

<section class="main">
  
  <section id="residenceDetails">
    <h3><b>Amenities: </b></h3>
    <p>There are <%= singleResidence.rooms %> single rooms, each of which has a bed, desk with chair and cupboard. There is also internet connectivity.</p>
    <h4>Other facilities:</h4>
    <p>
      <ul>
        <li>Gender: <%= singleResidence.gender %></li>
        <li>Bathrooms: There are three showers per block of 10 rooms.</li>
        <li>Kitchens: There is one common kitchen per block of 10 rooms.</li>
        <li>Communal laundry</li>
        <li>Communal rec hall with:</li>
        <li>TV</li>
        <li>Pool table and darts</li>
        <li>WiFi</li>
      </ul>
    </p>



  
  


  <% if (student.gender == singleResidence.gender || singleResidence.gender === "mixed") {%>
    <form action="/residences/apply/new/<%= singleResidence._id%>" method="post">
      <%if(student.applications != 3) {%>
        <button type="button" class="submit-btn mx-5" id="submitBtn">Submit</button>
      <% } %>
      <!-- confirmPopup -->
      <div id="confirmModal" class="modal">
        <div class="cnfrm-modal-content">
          <div class="pop-head">
            <h3>Confirm Application</h3>
            <span class="close">Close X</span>
          </div>
          <div class="pop-body">
            <p>Please review your application details before proceeding to submit. Ensure all information is accurate and complete. Once submitted, you may not be able to make changes.</p>
          </div>
          <div class="pop-foot">
            <button type="submit" class="confirm-btn" id="confirmBtn">Apply</button>
          </div>
        </div>
      </div>
  </form>
  <% }else if (student && !student.applied) { %>
    <div class="alert alert-warning alert-dismissible fade show" role="alert">
      You can only apply for residences that match the gender stated on your profile.
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  <% } %>
</section>
</body>
  <%- include('partials/footer') %>  